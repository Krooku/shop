(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["cart"],{"568e":function(t,r,e){"use strict";var n=e("ff48"),a=e.n(n);a.a},"6f82":function(t,r,e){"use strict";var n=function(){var t=this,r=t.$createElement,e=t._self._c||r;return e("span",{domProps:{textContent:t._s(t.displayNumber)}})},a=[],i={props:{number:{type:Number,default:0},initValue:{type:Number,default:0}},data:function(){return{displayNumber:this.initValue,interval:!1}},watch:{number:function(){var t=this;clearInterval(this.interval),this.number!==this.displayNumber&&(this.interval=window.setInterval((function(){if(t.displayNumber!==t.number){var r=(t.number-t.displayNumber)/10;r=r>=0?Math.ceil(r):Math.floor(r),t.displayNumber=t.displayNumber+r}}),20))}},mounted:function(){},ready:function(){alert("hej"),this.displayNumber=this.number?this.number:0}},u=i,c=e("2877"),s=Object(c["a"])(u,n,a,!1,null,"293e1536",null);r["a"]=s.exports},"8fa2":function(t,r,e){},"9d45":function(t,r,e){"use strict";var n=function(){var t=this,r=t.$createElement,e=t._self._c||r;return e("div",{ref:"view_template",staticClass:"view_container"},[t._t("default")],2)},a=[],i=e("cffa"),u={data:function(){return{nav:this.$parent.$parent.$refs.navigation.$refs.nav}},computed:{currentRouteName:function(){return this.$route.name}},mounted:function(){"homepage"===this.currentRouteName?(i["a"].set(this.nav,{x:0,opacity:0}),i["a"].to(this.nav,{opacity:1,duration:.5})):(i["a"].set(this.nav,{x:"-100%",opacity:1}),i["a"].to(this.nav,{x:0,duration:.5}))},methods:{beforeRouteLeave:function(t,r){var e=this;return new Promise((function(t,r){"homepage"===e.currentRouteName?i["a"].to(e.nav,{opacity:0,duration:.5,onComplete:t}):i["a"].to(e.nav,{x:"-400px",duration:.5,onComplete:t})}))}}},c=u,s=(e("b372"),e("2877")),o=Object(s["a"])(c,n,a,!1,null,null,null);r["a"]=o.exports},b372:function(t,r,e){"use strict";var n=e("8fa2"),a=e.n(n);a.a},b789:function(t,r,e){"use strict";e.r(r);var n=function(){var t=this,r=t.$createElement,e=t._self._c||r;return e("view-template",[0===t.cartArray.length?e("p",[t._v(" Twój koszyk jest pusty ")]):t._e(),e("animated-number",{attrs:{number:t.summary}}),e("transition-group",{staticClass:"container",attrs:{tag:"div",name:"fade"}},t._l(t.cartArray,(function(r){return e("div",{key:r.id,staticClass:"product"},[e("p",[t._v(" "+t._s(r.product.name)+" "+t._s(r.product.price)+" "),e("span",{on:{click:function(e){return t.removeProductsFromCart(r.id)}}},[t._v(" usuń ")])]),e("div",{staticStyle:{display:"none"}},[e("span",{staticClass:"char",on:{click:function(e){return t.increase(r.id)}}},[t._v("+")]),t._v(" "+t._s(r.count)+" "),e("span",{staticClass:"char",on:{click:function(e){return t.decrease(r.id)}}},[t._v("-")]),e("p",{on:{click:function(e){return t.removeProductsFromCart(r.id)}}},[t._v(" usuń ")])])])})),0)],1)},a=[],i=e("a34a"),u=e.n(i),c=e("d722"),s=e("9d45"),o=e("6f82");function f(t,r){return d(t)||p(t,r)||l()}function l(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function p(t,r){var e=[],n=!0,a=!1,i=void 0;try{for(var u,c=t[Symbol.iterator]();!(n=(u=c.next()).done);n=!0)if(e.push(u.value),r&&e.length===r)break}catch(s){a=!0,i=s}finally{try{n||null==c["return"]||c["return"]()}finally{if(a)throw i}}return e}function d(t){if(Array.isArray(t))return t}function m(t){return y(t)||v(t)||h()}function h(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function v(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function y(t){if(Array.isArray(t)){for(var r=0,e=new Array(t.length);r<t.length;r++)e[r]=t[r];return e}}function b(t,r,e,n,a,i,u){try{var c=t[i](u),s=c.value}catch(o){return void e(o)}c.done?r(s):Promise.resolve(s).then(n,a)}function w(t){return function(){var r=this,e=arguments;return new Promise((function(n,a){var i=t.apply(r,e);function u(t){b(i,n,a,u,c,"next",t)}function c(t){b(i,n,a,u,c,"throw",t)}u(void 0)}))}}var x={name:"Cart",components:{ViewTemplate:s["a"],AnimatedNumber:o["a"]},data:function(){return{error:null,cart:null,cartArray:[],summary:0}},beforeRouteEnter:function(){var t=w(u.a.mark((function t(r,e,n){var a;return u.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,c["a"].getCart();case 2:if(a=t.sent,200===a.status){t.next=5;break}return t.abrupt("return",this.error=a.data.message);case 5:n((function(t){t.cart=new Map,a.data.cart.forEach((function(r){t.summary+=r.price,t.cart.has(r._id)?t.cart.get(r._id)[1]++:t.cart.set(r._id,[r,1])})),t.cartArray=m(t.cart).map((function(t){var r=f(t,2),e=r[0],n=f(r[1],2),a=n[0],i=n[1];return{id:e,product:a,count:i}}))})),n();case 7:case"end":return t.stop()}}),t,this)})));function r(r,e,n){return t.apply(this,arguments)}return r}(),beforeRouteLeave:function(t,r,e){this.$children[0].beforeRouteLeave(t,r).then((function(){e()})),e(!1)},methods:{removeProductsFromCart:function(){var t=w(u.a.mark((function t(r){var e,n;return u.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,c["a"].removeProductsFromCart(r);case 2:if(e=t.sent,200===e.status){t.next=5;break}return t.abrupt("return",this.error=e.data.message);case 5:n=this.cartArray.findIndex((function(t){return t.id===r})),n>-1&&(this.summary-=this.cartArray[n].product.price*this.cartArray[n].count,this.cartArray.splice(n,1));case 7:case"end":return t.stop()}}),t,this)})));function r(r){return t.apply(this,arguments)}return r}(),increase:function(){var t=w(u.a.mark((function t(r){var e,n;return u.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,c["a"].addToCart(r);case 2:if(e=t.sent,200===e.status){t.next=5;break}return t.abrupt("return",this.error=e.data.message);case 5:n=this.cartArray.findIndex((function(t){return t.id===r})),n>-1&&(this.summary+=this.cartArray[n].product.price,this.cartArray[n].count++);case 7:case"end":return t.stop()}}),t,this)})));function r(r){return t.apply(this,arguments)}return r}(),decrease:function(){var t=w(u.a.mark((function t(r){var e,n;return u.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,c["a"].removeFromCart(r);case 2:if(e=t.sent,200===e.status){t.next=5;break}return t.abrupt("return",this.error=e.data.message);case 5:n=this.cartArray.findIndex((function(t){return t.id===r})),n>-1&&(this.summary-=this.cartArray[n].product.price,this.cartArray[n].count-1===0?this.cartArray.splice(n,1):this.cartArray[n].count--);case 7:case"end":return t.stop()}}),t,this)})));function r(r){return t.apply(this,arguments)}return r}()}},_=x,A=(e("568e"),e("2877")),k=Object(A["a"])(_,n,a,!1,null,"98d33784",null);r["default"]=k.exports},ff48:function(t,r,e){}}]);
//# sourceMappingURL=cart.9781c984.js.map