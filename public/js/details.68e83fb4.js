(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["details"],{5943:function(t,s,a){"use strict";var e=a("ffe2"),r=a.n(e);r.a},"9f52":function(t,s,a){"use strict";a.r(s);var e=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("div",{staticClass:"container"},[e("p",{staticClass:"text_lines"},[t._v(" "+t._s(t.car.band)),e("span",[t._v(" "+t._s(t.car.model))])]),e("p",{staticClass:"text_lines"},[t._v(" "+t._s(t.car.registrationNumber)+" ")]),e("p",{staticClass:"text_lines"},[t._v(" "+t._s(t.car.fuel)+"% ")]),e("p",{staticClass:"text_lines"},[t._v(" "+t._s(t.car.mileage)+" ")]),e("p",{staticClass:"text_lines"},[t._v(" "+t._s(t.car.vim)+" ")]),e("p",{staticClass:"text_lines"},[t._v(" Uszkodzenia pojazdu ")]),e("canvas",{attrs:{id:"myCanvas",width:"300",height:"227",onLoad:t.drawFrom},on:{mousemove:t.showCoordinates,mousedown:t.drawScratch}}),e("div",{staticStyle:{display:"none"}},[e("img",{attrs:{id:"source",src:a("ea1c"),width:"300",height:"227"},on:{load:t.onImgLoad}})]),e("button",{on:{click:function(s){return t.setScratchs()}}},[t._v(" zapisz ")])])])},r=[],n=a("a34a"),c=a.n(n),i=a("d722");function h(t,s,a,e,r,n,c){try{var i=t[n](c),h=i.value}catch(o){return void a(o)}i.done?s(h):Promise.resolve(h).then(e,r)}function o(t){return function(){var s=this,a=arguments;return new Promise((function(e,r){var n=t.apply(s,a);function c(t){h(n,e,r,c,i,"next",t)}function i(t){h(n,e,r,c,i,"throw",t)}c(void 0)}))}}var u={data:function(){return{carId:this.$route.params.carId,car:{},scratchs:[],scratchsJSON:"",scratchsNew:[],error:!1,message:"",canvas:null,currentCanvas:null,x:0,y:0,items:[{id:1,src:"../assets/stan_techniczny.jpg"},{id:2,src:"img/img2.jpg"},{id:3,src:"img/img3.jpg"}],imgData:null,img:null,imgLoaded:!1}},mounted:function(){},beforeRouteEnter:function(){var t=o(c.a.mark((function t(s,a,e){var r;return c.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,i["a"].getCar(s.params.carId);case 2:if(r=t.sent,200===r.status){t.next=5;break}return t.abrupt("return",e({name:"homepage"}));case 5:e((function(t){Object.assign(t.car,r.data),t.car=r.data,t.scratchs=t.car.scratchs}));case 6:case"end":return t.stop()}}),t)})));function s(s,a,e){return t.apply(this,arguments)}return s}(),beforeRouteUpdate:function(){var t=o(c.a.mark((function t(s,a,e){var r;return c.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,i["a"].getCar(s.params.carId);case 2:if(r=t.sent,200===r.status){t.next=5;break}return t.abrupt("return",e({name:"homepage"}));case 5:Object.assign(this.car,r.data),this.scratchs=this.car.scratchs,e();case 8:case"end":return t.stop()}}),t,this)})));function s(s,a,e){return t.apply(this,arguments)}return s}(),methods:{onImgLoad:function(){var t=document.getElementById("myCanvas");this.currentCanvas=t;var s=document.getElementById("source");this.img=s;var a=Math.min(t.width/s.width,t.height/s.height);t.getContext("2d").drawImage(s,0,0,s.width*a,s.height*a),this.drawFrom()},drawFrom:function(){for(var t=0;t<this.scratchs.length;t++)this.drawX(this.currentCanvas.getContext("2d"),this.scratchs[t].x,this.scratchs[t].y,"red");for(var s=0;s<this.scratchsNew.length;s++)this.drawX(this.currentCanvas.getContext("2d"),this.scratchsNew[s].x,this.scratchsNew[s].y,"green")},setScratchs:function(){var t=o(c.a.mark((function t(){var s;return c.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.scratchs=this.scratchs.concat(this.scratchsNew),this.scratchsNew=[],t.next=4,i["a"].setScratchs(this.carId,{scratchs:this.scratchs});case 4:s=t.sent,200!==s.status?(this.error=!0,this.message=s.data.message):(this.error=!1,this.message="uszkodzenia pojazdu zostaÅ‚y zapisane.");case 6:case"end":return t.stop()}}),t,this)})));function s(){return t.apply(this,arguments)}return s}(),drawX:function(t,s,a,e){t.beginPath(),t.strokeStyle=e,t.lineWidth=4,t.moveTo(s,a),t.lineTo(s+4,a+4),t.lineTo(s-4,a-4),t.moveTo(s,a),t.lineTo(s+4,a-4),t.lineTo(s-4,a+4),t.stroke(),t.closePath()},showCoordinates:function(t){this.x=t.offsetX,this.y=t.offsetY},drawScratch:function(t){this.checkCollision()&&(this.scratchsNew.push({x:this.x,y:this.y}),this.drawX(this.currentCanvas.getContext("2d"),this.x,this.y,"green"))},checkCollision:function(){for(var t=0;t<this.scratchsNew.length;t++)if(this.x<=this.scratchsNew[t].x+12&&this.x>=this.scratchsNew[t].x-12&&this.y<=this.scratchsNew[t].y+12&&this.y>=this.scratchsNew[t].y-12)return this.currentCanvas.getContext("2d").clearRect(0,0,this.currentCanvas.width,this.currentCanvas.height),this.scratchsNew.splice(t,1),this.onImgLoad(),!1;for(var s=0;s<this.scratchs.length;s++)if(this.x<=this.scratchs[s].x+12&&this.x>=this.scratchs[s].x-12&&this.y<=this.scratchs[s].y+12&&this.y>=this.scratchs[s].y-12)return this.currentCanvas.getContext("2d").clearRect(0,0,this.currentCanvas.width,this.currentCanvas.height),this.scratchs.splice(s,1),this.onImgLoad(),!1;return!0}},beforeRouteLeave:function(t,s,a){var e=window.confirm("Do you really want to leave? you have unsaved changes!");e?a():a(!1)}},d=u,l=(a("5943"),a("2877")),v=Object(l["a"])(d,e,r,!1,null,null,null);s["default"]=v.exports},ea1c:function(t,s,a){t.exports=a.p+"img/stan_techniczny.a49917d6.jpg"},ffe2:function(t,s,a){}}]);